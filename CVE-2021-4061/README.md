
This is a unstable exploit for `CVE-2021-4061: Type Confusion in V8. Reported by Paolo Severini on 2021-11-18`


## Writeup

Might update when I am able to write stable exploit for chrome

## TL; DR

Commit Message: [wasm][turbofan] Pass correct instance when inlining JsToWasm wrappers

wasmInstance object is sent instead of WasmApiFunctionRef after JIT to wasm code, we can edit elements and properties of wasm instance and get limited rip control means we can control lower bytes. I dont know what to do with rip control, then [vakzz](https://twitter.com/wcbowling) told me that I can jit some code and jump there and I remembered reading a similar exploit technique here https://labs.f-secure.com/blog/exploiting-cve-2019-17026-a-firefox-jit-bug/. 
Luckily other jited code stays in same upper bytes as this and Mac jited code pointer is stable, so I can JIT a function and jump there.

Please check more info in poc.js I added some notes there.
